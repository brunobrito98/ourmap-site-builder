# 🎉 Plataforma de Gerenciamento de Eventos

Uma solução completa e moderna para criar, descobrir e participar de eventos. Conecte-se com pessoas, organize eventos incríveis e construa comunidades engajadas.

![Status](https://img.shields.io/badge/status-active-success.svg)
![License](https://img.shields.io/badge/license-MIT-blue.svg)

## 🌟 Visão Geral

Nossa plataforma oferece uma experiência completa para organizadores e participantes de eventos, com recursos sociais avançados, sistema de pagamentos integrado, e ferramentas de promoção inteligentes.

### ✨ Principais Funcionalidades

#### Para Participantes
- 🔍 **Descoberta Inteligente:** Encontre eventos próximos baseados em sua localização e interesses
- 🎫 **Ingressos Digitais:** Compre ingressos com QR Code e pagamento seguro via Stripe
- 👥 **Conexões Sociais:** Sistema completo de amizades e networking
- 💬 **Chat em Tempo Real:** Converse com amigos e organizadores
- 🔔 **Notificações:** Push e email para não perder nada
- ⭐ **Avaliações:** Avalie eventos e organizadores
- 🎯 **Grupos Temáticos:** Participe de comunidades por interesse
- 💰 **Programa de Referência:** Ganhe créditos indicando amigos

#### Para Organizadores
- 📝 **Criação Simplificada:** Interface intuitiva para criar eventos
- 💳 **Monetização:** Venda ingressos com múltiplos tipos e lotes
- 🔁 **Eventos Recorrentes:** Configure séries de eventos automaticamente
- 💸 **Vaquinha/Crowdfunding:** Arrecade fundos coletivamente
- 🎯 **Sistema de Boost:** Promova eventos com planos pagos
- 📊 **Analytics Completo:** Acompanhe métricas e receita
- 👥 **Gestão de Participantes:** Check-in, lista de espera, convidados VIP
- 📸 **Galeria Colaborativa:** Participantes compartilham fotos

#### Recursos Sociais
- 🤝 **Sistema de Amizades:** Conexões, seguidores e rede social
- 🌐 **Grupos e Comunidades:** Discussões, enquetes e eventos em grupo
- 💬 **Mensagens Privadas:** Chat 1-on-1 com controles de privacidade
- 🎤 **Perfis Personalizados:** Galeria de fotos, bio, redes sociais

#### Tecnologia e Segurança
- 🔒 **Pagamentos Seguros:** Stripe para processamento
- 🗺️ **Mapbox Integration:** Mapas interativos e geolocalização
- 📧 **SendGrid:** Emails transacionais e notificações
- 🔔 **Firebase:** Notificações push em tempo real
- 🛡️ **Moderação Automática:** Sistema anti-spam e conteúdo inadequado

## 📚 Documentação

### 🚀 Início Rápido
- [Guia de Início Rápido](docs/INICIO-RAPIDO.md) - Comece em 5 minutos

### 📖 Manuais Completos
- [Manual do Usuário](docs/manuais/MANUAL-USUARIO.md) - Guia completo de todas as funcionalidades
- [Manual do Administrador](docs/admin/MANUAL-ADMINISTRADOR.md) - Gestão e moderação da plataforma

### 🎯 Tutoriais Específicos
- [Sistema de Boost de Eventos](docs/tutoriais/boost-eventos.md) - Promova seus eventos
- [Programa de Referência](docs/tutoriais/programa-referencia.md) - Ganhe créditos
- [Criar Eventos Pagos](docs/tutoriais/criar-eventos-pagos.md) - Monetize seus eventos
- [Grupos e Comunidades](docs/tutoriais/grupos-comunidades.md) - Construa comunidades
- [Eventos Recorrentes](docs/tutoriais/eventos-recorrentes.md) - Séries de eventos

## 🛠️ Stack Tecnológica

### Frontend
- **React 18** - UI Framework
- **TypeScript** - Type Safety
- **Vite** - Build Tool
- **Wouter** - Routing
- **TanStack Query** - Data Fetching & Caching
- **Tailwind CSS** - Styling
- **shadcn/ui** - Component Library
- **Radix UI** - Accessible Primitives
- **Mapbox GL JS** - Maps & Geolocation
- **Stripe.js** - Payment Processing

### Backend
- **Node.js** - Runtime
- **Express.js** - Web Framework
- **TypeScript** - Type Safety
- **Drizzle ORM** - Database ORM
- **PostgreSQL** (Supabase) - Database
- **Passport.js** - Authentication
- **Stripe** - Payment Processing
- **SendGrid** - Email Service
- **Firebase Admin** - Push Notifications
- **Node-cron** - Scheduled Tasks

### Serviços Externos
- **Supabase** - PostgreSQL Database & Storage
- **Stripe** - Payment Processing
- **SendGrid** - Transactional Emails
- **Firebase Cloud Messaging** - Push Notifications
- **Mapbox** - Maps & Geocoding

## 🚀 Instalação e Configuração

### Pré-requisitos
- Node.js 20+ 
- PostgreSQL (ou conta Supabase)
- Contas nos serviços externos (Stripe, SendGrid, Firebase, Mapbox)

### Configuração Local

1. **Clone o repositório**
```bash
git clone <repository-url>
cd <project-folder>
```

2. **Instale dependências**
```bash
npm install
```

3. **Configure variáveis de ambiente**

Crie arquivo `.env` na raiz:

```env
# Database
DATABASE_URL=postgresql://user:password@host:port/database

# Stripe
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_...

# SendGrid
SENDGRID_API_KEY=SG....
SENDGRID_FROM_EMAIL=no-reply@seudominio.com

# Firebase
FIREBASE_SERVICE_ACCOUNT_JSON={"type":"service_account",...}
FIREBASE_WEB_CONFIG=const firebaseConfig = {...}

# Mapbox
MAPBOX_TOKEN=pk.ey...
VITE_MAPBOX_ACCESS_TOKEN=pk.ey...

# Session
SESSION_SECRET=seu-secret-aleatorio-aqui

# Admin (primeiro acesso)
ADMIN_PASSWORD=sua-senha-segura
```

4. **Configure o banco de dados**
```bash
npm run db:push
```

5. **Inicie o servidor de desenvolvimento**
```bash
npm run dev
```

6. **Acesse a aplicação**
```
http://localhost:5000
```

### Configuração do Webhook do Stripe

⚠️ **Importante para Pagamentos:** Em desenvolvimento, o webhook do Stripe pode não disparar automaticamente. Existem duas soluções:

#### Opção 1: Stripe CLI (Recomendado)
```bash
# Instale o Stripe CLI
brew install stripe/stripe-cli/stripe

# Faça login
stripe login

# Encaminhe eventos para seu servidor local
stripe listen --forward-to http://localhost:5000/api/stripe/webhook
```


#### Opção 2: Endpoint de Fallback (Somente Admin)
Se o webhook não disparar, administradores podem usar o endpoint de fallback manual:

```bash
# REQUER AUTENTICAÇÃO DE ADMIN
# Após um pagamento ser confirmado no Stripe Dashboard
curl -X POST http://localhost:5000/api/stripe/process-pending-payment \
  -H "Content-Type: application/json" \
  -H "Cookie: connect.sid=YOUR_ADMIN_SESSION_COOKIE" \
  -d '{"paymentIntentId": "pi_xxxxx"}'
```

⚠️ **Segurança**: Este endpoint requer autenticação de administrador para prevenir processamento não autorizado de pagamentos.

Este endpoint processa manualmente pagamentos que foram confirmados mas não geraram webhook:
- ✅ Verifica status do pagamento no Stripe
- ✅ Cria o pedido (order) de forma idempotente
- ✅ Gera ingressos com QR codes únicos

- ✅ Confirma presença no evento
- ✅ Envia email de confirmação

### Deployment (Replit)

A aplicação está otimizada para deploy no Replit:

1. Configure Secrets no painel do Replit
2. O sistema detecta automaticamente ambiente Replit
3. Workflow "Start application" inicia automaticamente
4. Configurado para Replit Autoscale
5. Configure o webhook do Stripe no Dashboard apontando para: `https://seu-repl.replit.app/api/stripe/webhook`

## 📊 Estrutura do Projeto

```
.
├── client/                 # Frontend React
│   ├── src/
│   │   ├── components/    # Componentes React
│   │   ├── pages/        # Páginas da aplicação
│   │   ├── lib/          # Utilitários e helpers
│   │   └── hooks/        # Custom React hooks
│   └── index.html
├── server/                # Backend Express
│   ├── index.ts          # Entry point
│   ├── routes.ts         # API routes
│   ├── storage.ts        # Database layer
│   ├── auth.ts           # Authentication
│   ├── db.ts             # Database connection
│   ├── moderation.ts     # Content moderation
│   ├── *-cron.ts         # Scheduled tasks
│   └── email-*.ts        # Email services
├── shared/               # Código compartilhado
│   └── schema.ts         # Database schema (Drizzle)
├── docs/                 # Documentação
│   ├── manuais/         # Manuais completos
│   ├── tutoriais/       # Tutoriais específicos
│   └── admin/           # Docs administrativas
└── README.md
```

## 🔧 Scripts Disponíveis

```bash
# Desenvolvimento
npm run dev              # Inicia servidor de desenvolvimento

# Database
npm run db:push          # Sincroniza schema com database
npm run db:studio        # Abre Drizzle Studio (DB GUI)

# Build
npm run build            # Build para produção
npm run start            # Inicia servidor de produção
```

## 🔐 Autenticação

A plataforma suporta múltiplos métodos de autenticação:

### Replit Auth
- Login SSO com conta Replit
- Configuração automática
- Ideal para usuários da plataforma Replit

### Autenticação Local
- Email + Senha
- Verificação de email obrigatória
- Recuperação de senha
- Ideal para uso geral

## 💳 Sistema de Pagamentos

### Stripe Integration

**Eventos Pagos:**
- Múltiplos tipos de ingresso
- Lotes progressivos
- QR Codes automáticos
- Webhook para confirmação
- Reembolsos automáticos

**Multi-currency:**
- BRL (Brasil)
- USD (Internacional)
- Detecção automática baseada em país

**Boost de Eventos:**
- Planos: Prata, Ouro, Diamante
- Pagamento via Stripe
- Distribuição automática ao longo do tempo

## 📧 Sistema de Emails

### SendGrid Integration

**Emails Transacionais:**
- Confirmação de cadastro
- Recuperação de senha
- Confirmação de ingresso (com QR Code)
- Notificações de eventos
- Cancelamento de eventos

**Emails Periódicos:**
- Resumo diário de eventos locais
- Resumo semanal de atividades
- Pós-evento (solicitação de avaliação)

**Multi-idioma:**
- Português (Brasil)
- English (Internacional)
- Detecção automática baseada em país

## 🔔 Notificações Push

### Firebase Cloud Messaging

**Notificações em Tempo Real:**
- Novos eventos na área
- Solicitações de amizade
- Novas mensagens
- Confirmações de presença
- Lembretes de eventos
- Cancelamentos
- Atividade em grupos

**Configurável:**
- Usuário controla preferências
- Por tipo de notificação
- Horários permitidos

## 🗺️ Geolocalização

### Mapbox Integration

**Recursos:**
- Seleção de local no mapa
- Geocoding (endereço → coordenadas)
- Reverse geocoding (coordenadas → endereço)
- Detecção automática de localização
- Busca de eventos por proximidade
- Visualização de eventos em mapa

## 🛡️ Moderação de Conteúdo

### Sistema Automático

**Análise Multi-camadas:**
- Blocklist de palavras/URLs
- Detecção de padrões (regex)
- Risk scoring automático
- Filtro de profanidade

**Ações:**
- Auto-aprovação (risk score baixo)
- Revisão humana (score médio)
- Auto-rejeição (score alto)

**Trust Score de Usuários:**
- Sistema de reputação
- Aumenta com bom comportamento
- Diminui com violações
- Influencia moderação futura

## 📈 Analytics e Métricas

### Dashboard do Organizador
- Visualizações do evento
- Taxa de conversão
- Receita em tempo real
- Origem dos participantes
- Efetividade de boost

### Dashboard Admin
- KPIs da plataforma
- Crescimento de usuários
- Eventos por categoria
- Receita total
- Métricas de moderação

## 🔄 Processos Automatizados (Cron Jobs)

### Configurados e Ativos

**Email Digests:**
- Resumos diários: 7h da manhã
- Resumos semanais: Segunda 9h
- Limpeza de processados: Diariamente

**Event Reminders:**
- 1 hora antes: Notificação push + email
- No horário: Notificação push
- Executa a cada minuto

**Boost Distribution:**
- Distribui "subidas" de eventos promovidos
- Executa a cada hora
- Algoritmo inteligente de timing

**Pending Orders Cleanup:**
- Limpa pedidos Stripe pendentes >24h
- Executa a cada 6 horas

**Post-Event Ratings:**
- Solicita avaliação 24h após evento
- Executa diariamente às 10h

## 🌍 Internacionalização (i18n)

**Idiomas Suportados:**
- 🇧🇷 Português (Brasil)
- 🇺🇸 English (US)

**Detecção Automática:**
- Browser language
- País do usuário (via geolocation)
- Preferência manual

**Traduzido:**
- Interface completa
- Emails
- Notificações push
- Categorias

## 🔒 Privacidade e Segurança

### Conformidade
- LGPD (Brasil)
- GDPR (Europa)
- Direito ao esquecimento
- Exportação de dados

### Segurança
- Senhas com bcrypt
- HTTPS obrigatório (produção)
- Session management seguro
- Proteção contra CSRF
- Rate limiting
- SQL injection protection (via ORM)
- XSS protection

### Controles de Privacidade
- Visibilidade de perfil configurável
- Privacidade de mensagens
- Eventos privados com link
- Dados sensíveis mascarados

## 📱 Progressive Web App (PWA)

- Instalável em dispositivos móveis
- Funciona offline (cache)
- Notificações push nativas
- Experiência mobile-first

## 🤝 Contribuindo

Contribuições são bem-vindas! Para contribuir:

1. Fork o projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudanças (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## 📝 Changelog

### v1.0.0 (Outubro 2025)
- ✨ Lançamento inicial
- 🎉 Sistema completo de eventos
- 💳 Integração Stripe
- 📧 Sistema de emails
- 🔔 Notificações push
- 👥 Grupos e comunidades
- 🎯 Sistema de boost
- 💸 Programa de referência

## 🐛 Reportar Bugs

Encontrou um bug? Por favor:
1. Verifique se já não foi reportado
2. Abra uma issue com:
   - Descrição clara do problema
   - Passos para reproduzir
   - Comportamento esperado vs atual
   - Screenshots (se aplicável)
   - Ambiente (browser, OS, etc.)

## 📞 Suporte

- 📧 Email: suporte@plataforma.com
- 💬 Chat: Disponível na plataforma
- 📖 Docs: [Documentação Completa](docs/)
- ❓ FAQ: [Manual do Usuário](docs/manuais/MANUAL-USUARIO.md#perguntas-frequentes)

## 📄 Licença

Este projeto está sob a licença MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## 🙏 Agradecimentos

- [Replit](https://replit.com) - Plataforma de desenvolvimento e hosting
- [Stripe](https://stripe.com) - Processamento de pagamentos
- [SendGrid](https://sendgrid.com) - Serviço de email
- [Firebase](https://firebase.google.com) - Push notifications
- [Mapbox](https://mapbox.com) - Mapas e geolocalização
- [Supabase](https://supabase.com) - Database e storage
- Comunidade open-source pelas bibliotecas incríveis

---

**Desenvolvido com ❤️ para conectar pessoas através de eventos**

🌟 Se você gostou deste projeto, considere dar uma estrela no GitHub!
